# OpenAI API 料金計算ツール

OpenAI が提供する API モデルの料金を日本円で試算できる PHP 製のシンプルな Web アプリケーションです。モデル別の単価や為替レートは JSON ファイルで管理でき、最新の情報に合わせて自由に更新できます。

## 必要要件

- PHP 8.1 以上

## 使い方

1. リポジトリをクローンします。
2. PHP のビルトインサーバーなどでアプリを起動します。

```bash
php -S localhost:8000
```

3. ブラウザで `http://localhost:8000/index.php` にアクセスします。
4. モデルを選択し、トークン数やリクエスト数などの利用量を入力すると、米ドルと日本円での概算料金が表示されます。

## 料金設定の管理

料金や為替などのパラメータは `data/pricing.json` にまとまっています。構成例:

```json
{
  "meta": {
    "usd_to_jpy": 149.5,
    "last_updated": "2025-02-15",
    "exchange_rate_source": "市場想定レート (2025年2月中旬の平均値)",
    "notes": "OpenAI 公式 API 料金ページ (https://openai.com/ja-JP/api/) を基に 1,000 トークンあたりの単価へ換算したサンプルです。"
  },
  "models": [
    {
      "id": "gpt-4.1",
      "name": "GPT-4.1",
      "category": "フラッグシップ",
      "pricing": [
        {
          "id": "prompt_tokens",
          "label": "プロンプト (入力トークン)",
          "unit": "1,000 トークン",
          "input_unit": "トークン",
          "unit_size": 1000,
          "price_per_unit_usd": 0.0045
        }
      ]
    }
  ]
}
```

- `unit` は単価が適用される単位（例: `1,000 トークン`）。
- `input_unit` はフォーム入力時に利用者へ表示する単位（例: `トークン`）。
- `unit_size` は価格 1 単位が何個の `input_unit` に相当するかを表します。
- `usd_to_jpy` を更新することで為替レートを調整できます。

## サンプルに含まれるモデル

デフォルトの `data/pricing.json` には OpenAI 公式の料金表（2025 年 2 月時点）を基にした以下のモデルが含まれています。

- GPT-4.1 / GPT-4.1 mini などのフラッグシップモデル
- GPT-4o / GPT-4o mini 系列（マルチモーダル、音声認識・音声合成向け）
- o1 / o1-mini などの推論モデル
- text-embedding-3 シリーズ、GPT-3.5 Turbo などの埋め込み・レガシーモデル

必要に応じて JSON を編集し、実際に利用するモデルや最新価格へ差し替えてください。

## 注意事項

- 本ツールで算出した金額は概算であり、実際の請求額は OpenAI の利用明細をご確認ください。
- JSON ファイルを編集した後はページを再読み込みして反映を確認してください。

## ライセンス

このリポジトリは MIT ライセンスの下で公開されています。
