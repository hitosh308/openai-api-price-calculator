# OpenAI API 料金計算ツール

OpenAI が提供する API モデルの料金を日本円で試算できる PHP 製のシンプルな Web アプリケーションです。モデル別の単価や為替レートは JSON ファイルで管理でき、最新の情報に合わせて自由に更新できます。

## 必要要件

- PHP 8.1 以上

## 使い方

1. リポジトリをクローンします。
2. PHP のビルトインサーバーなどでアプリを起動します。

```bash
php -S localhost:8000
```

3. ブラウザで `http://localhost:8000/index.php` にアクセスします。
4. モデルを選択し、トークン数やリクエスト数などの利用量を入力すると、米ドルと日本円での概算料金が表示されます。

## 料金設定の管理

料金や為替などのパラメータは `data/pricing.json` にまとまっています。構成例:

```json
{
  "meta": {
    "usd_to_jpy": 155.25,
    "last_updated": "2024-05-20",
    "exchange_rate_source": "手動設定 (例: 為替レートAPIを参照して更新してください)",
    "notes": "OpenAI公式サイト (2024年5月時点) の価格をベースにした例です。実際の価格は変更になる可能性があります。"
  },
  "models": [
    {
      "id": "gpt-4o",
      "name": "GPT-4o",
      "category": "フラッグシップ",
      "pricing": [
        {
          "id": "prompt_tokens",
          "label": "プロンプト (入力トークン)",
          "unit": "1,000 トークン",
          "input_unit": "トークン",
          "unit_size": 1000,
          "price_per_unit_usd": 0.005
        }
      ]
    }
  ]
}
```

- `unit` は単価が適用される単位（例: `1,000 トークン`）。
- `input_unit` はフォーム入力時に利用者へ表示する単位（例: `トークン`）。
- `unit_size` は価格 1 単位が何個の `input_unit` に相当するかを表します。
- `usd_to_jpy` を更新することで為替レートを調整できます。

## 注意事項

- 本ツールで算出した金額は概算であり、実際の請求額は OpenAI の利用明細をご確認ください。
- JSON ファイルを編集した後はページを再読み込みして反映を確認してください。

## ライセンス

このリポジトリは MIT ライセンスの下で公開されています。
